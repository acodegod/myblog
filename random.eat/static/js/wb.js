(function(){var u=(function(){var e={};var f=[];e.inc=function(a,b){return true};e.register=function(a,b){var c=a.split(".");var d=e;var k=null;while(k=c.shift()){if(c.length){if(d[k]===undefined){d[k]={}}d=d[k]}else{if(d[k]===undefined){try{d[k]=b(e)}catch(exp){f.push(exp)}}}}};e.regShort=function(a,b){if(e[a]!==undefined){throw"["+a+"] : short : has been register"}e[a]=b};e.IE=/msie/i.test(navigator.userAgent);e.E=function(a){if(typeof a==="string"){return document.getElementById(a)}else{return a}};e.C=function(a){var b;a=a.toUpperCase();if(a=="TEXT"){b=document.createTextNode("")}else{if(a=="BUFFER"){b=document.createDocumentFragment()}else{b=document.createElement(a)}}return b};e.log=function(a){f.push("["+((new Date()).getTime()%100000)+"]: "+a)};e.getErrorLogInformationList=function(n){return f.splice(0,n||f.length)};return e})();$Import=u.inc;u.register("core.str.trim",function($){return function(a){a+="";if(typeof a!=="string"){throw"trim need a string as parameter"}var b=a.length;var s=0;var c=/(\u3000|\s|\t|\u00A0)/;while(s<b){if(!c.test(a.charAt(s))){break}s+=1}while(b>s){if(!c.test(a.charAt(b-1))){break}b-=1}return a.slice(s,b)}});u.register("core.evt.addEvent",function($){return function(a,b,c){var d=$.E(a);if(d==null){return false}b=b||"click";if((typeof c).toLowerCase()!="function"){return}if(d.addEventListener){d.addEventListener(b,c,false)}else{if(d.attachEvent){d.attachEvent("on"+b,c)}else{d["on"+b]=c}}return true}});u.register("core.obj.parseParam",function($){return function(a,b,c){var d,obj={};b=b||{};for(d in a){obj[d]=a[d];if(b[d]!=null){if(c){if(a.hasOwnProperty[d]){obj[d]=b[d]}}else{obj[d]=b[d]}}}return obj}});u.register("core.arr.isArray",function($){return function(o){return Object.prototype.toString.call(o)==="[object Array]"}});u.register("core.json.queryToJson",function($){return function(b,c){var d=$.core.str.trim(b).split("&");var e={};var f=function(a){if(c){return decodeURIComponent(a)}else{return a}};for(var i=0,len=d.length;i<len;i++){if(d[i]){var g=d[i].split("=");var h=g[0];var j=g[1];if(g.length<2){j=h;h="$nullName"}if(!e[h]){e[h]=f(j)}else{if($.core.arr.isArray(e[h])!=true){e[h]=[e[h]]}e[h].push(f(j))}}}return e}});u.register("core.obj.isEmpty",function($){return function(o,a){var b=true;for(var k in o){if(a){b=false;break}else{if(o.hasOwnProperty(k)){b=false;break}}}return b}});u.register("core.util.cookie",function($){var g={set:function(a,b,c){var e=[];var d,t;var f=$.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:true},c);if(f.encode==true){b=escape(b)}e.push(a+"="+b);if(f.path!=null){e.push("path="+f.path)}if(f.domain!=null){e.push("domain="+f.domain)}if(f.secure!=null){e.push(f.secure)}if(f.expire!=null){d=new Date();t=d.getTime()+f.expire*3600000;d.setTime(t);e.push("expires="+d.toGMTString())}document.cookie=e.join(";")},get:function(a){a=a.replace(/([\.\[\]\$])/g,"\\$1");var b=new RegExp(a+"=([^;]*)?;","i");var c=document.cookie+";";var d=c.match(b);if(d){return d[1]||""}else{return""}},remove:function(a,b){b=b||{};b.expire=-10;g.set(a,"",b)}};return g});u.register("core.str.parseURL",function($){return function(a){var b=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var c=["url","scheme","slash","host","port","path","query","hash"];var d=b.exec(a);var e={};for(var i=0,len=c.length;i<len;i+=1){e[c[i]]=d[i]||""}return e}});u.register("core.json.jsonToQuery",function($){var d=function(a,b){a=a==null?"":a;a=$.core.str.trim(a.toString());if(b){return encodeURIComponent(a)}else{return a}};return function(a,b){var c=[];if(typeof a=="object"){for(var k in a){if(k==="$nullName"){c=c.concat(a[k]);continue}if(a[k]instanceof Array){for(var i=0,len=a[k].length;i<len;i++){c.push(k+"="+d(a[k][i],b))}}else{if(typeof a[k]!="function"){c.push(k+"="+d(a[k],b))}}}}if(c.length){return c.join("&")}else{return""}}});u.register("core.util.URL",function($){return function(d,e){var f=$.core.obj.parseParam({isEncodeQuery:false,isEncodeHash:false},e||{});var g={};var h=$.core.str.parseURL(d);var i=$.core.json.queryToJson(h.query);var j=$.core.json.queryToJson(h.hash);g.setParam=function(a,b){i[a]=b;return this};g.getParam=function(a){return i[a]};g.setParams=function(a){for(var b in a){g.setParam(b,a[b])}return this};g.setHash=function(a,b){j[a]=b;return this};g.getHash=function(a){return j[a]};g.valueOf=g.toString=function(){var a=[];var b=$.core.json.jsonToQuery(i,f.isEncodeQuery);var c=$.core.json.jsonToQuery(j,f.isEncodeQuery);if(h.scheme!=""){a.push(h.scheme+":");a.push(h.slash)}if(h.host!=""){a.push(h.host);if(h.port!=""){a.push(":");a.push(h.port)}}a.push("/");a.push(h.path);if(b!=""){a.push("?"+b)}if(c!=""){a.push("#"+c)}return a.join("")};return g}});u.register("core.util.browser",function($){var a=navigator.userAgent.toLowerCase();var b=window.external||"";var d,m,extra,version,os;var f=function(s){var c=0;return parseFloat(s.replace(/\./g,function(){return(c++==1)?"":"."}))};try{if((/windows|win32/i).test(a)){os="windows"}else{if((/macintosh/i).test(a)){os="macintosh"}else{if((/rhino/i).test(a)){os="rhino"}}}if((m=a.match(/applewebkit\/([^\s]*)/))&&m[1]){d="webkit";version=f(m[1])}else{if((m=a.match(/presto\/([\d.]*)/))&&m[1]){d="presto";version=f(m[1])}else{if(m=a.match(/msie\s([^;]*)/)){d="trident";version=1;if((m=a.match(/trident\/([\d.]*)/))&&m[1]){version=f(m[1])}}else{if(/gecko/.test(a)){d="gecko";version=1;if((m=a.match(/rv:([\d.]*)/))&&m[1]){version=f(m[1])}}}}}if(/world/.test(a)){extra="world"}else{if(/360se/.test(a)){extra="360"}else{if((/maxthon/.test(a))||typeof b.max_version=="number"){extra="maxthon"}else{if(/tencenttraveler\s([\d.]*)/.test(a)){extra="tt"}else{if(/se\s([\d.]*)/.test(a)){extra="sogou"}}}}}}catch(e){}var g={OS:os,CORE:d,Version:version,EXTRA:(extra?extra:false),IE:/msie/.test(a),OPERA:/opera/.test(a),MOZ:/gecko/.test(a)&&!/(compatible|webkit)/.test(a),IE5:/msie 5 /.test(a),IE55:/msie 5.5/.test(a),IE6:/msie 6/.test(a),IE7:/msie 7/.test(a),IE8:/msie 8/.test(a),IE9:/msie 9/.test(a),SAFARI:!/chrome\/([\d.]*)/.test(a)&&/\/([\d.]*) safari/.test(a),CHROME:/chrome\/([\d.]*)/.test(a),IPAD:/\(ipad/i.test(a),IPHONE:/\(iphone/i.test(a),ITOUCH:/\(itouch/i.test(a),MOBILE:/mobile/i.test(a)};return g});u.register("core.dom.isNode",function($){return function(a){return(a!=undefined)&&Boolean(a.nodeName)&&Boolean(a.nodeType)}});u.register("core.util.hideContainer",function($){var b;var c=function(){if(b){return}b=$.C("div");b.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(b)};var d={appendChild:function(a){if($.core.dom.isNode(a)){c();b.appendChild(a)}},removeChild:function(a){if($.core.dom.isNode(a)){b&&b.removeChild(a)}}};return d});window.WB2=window.WB2||{};WB2._config=WB2._config||{};WB2._config.host=(window.location.protocol=="https:"?"https:":"http:")+"//js.t.sinajs.cn";WB2._config.cssHost=(window.location.protocol=="https:"?"https:":"http:")+"//img.t.sinajs.cn";WB2._config.cdn_version="20150130.02";window.WB2=window.WB2||{};WB2.Module={loginButton:{versions:{"1.0":{js:"loginButton{ver}.js?version=20140327",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"loginButton.js?version=20140327",css:"/t4/appstyle/widget/css/loginButton/loginButton.css"}}},followButton:{versions:{"1.0":{js:"followButton{ver}.js",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"followButton.js?version=20140327",css:"/t4/appstyle/widget/css/followButton/followButtonSdk.css"}}},publish:{versions:{"1.0":{js:"publish{ver}.js?version=20170720",css:"/t3/style/css/thirdpart/rlsbox.css?version=20140327"},"1.1":{js:"publish{ver}.js?version=20170720",css:"/t35/appstyle/opent/css/widgets/js_weibo_send/js_weibo_send.css"},latest:{js:"publish.js?version=20170720",css:"/t4/appstyle/widget/css/weiboPublish/weiboPublish.css"}}},hoverCard:{versions:{"1.0":{js:"hoverCard{ver}.js?version=20141124",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"hoverCard.js?version=20141124",css:"/t4/appstyle/widget/css/weiboCard/weiboCard.css"}}},recommend:{versions:{"1.0":{js:"recommend{ver}.js"},latest:{js:"recommend.js",css:"/t3/style/css/thirdpart/interested.css"}}},selector:{versions:{"1.0":{js:"selector{ver}.js?version=20140327",css:"/t3/style/css/thirdpart/csuser.css"},latest:{js:"selector.js?version=20140327",css:"/t4/appstyle/widget/css/selector/selector.css?version=20150714"}}},shareRecommend:{versions:{"1.0":{js:"shareRecommend{ver}.js?version=20140327"},latest:{js:"shareRecommend.js?version=20140327",css:"/t4/appstyle/widget/css/weiboFamous/weiboFamous.css"}}},like:{versions:{"1.0":{js:"like{ver}.js?version=20140327"},latest:{js:"like.js?version=20140327",css:"/t4/appstyle/widget/css/praiseButton/praiseButton.css?version=20140327"}}},iframeWidget:{versions:{latest:{js:"iframeWidget.js?version=20140327"}}},invite:{versions:{"1.0":{js:"invite{ver}.js?version=20140327"},latest:{js:"invite.js?version=20140327",css:(window.location.protocol=="https:"?"https:":"http:")+"//img.t.sinajs.cn/t4/appstyle/V5_invite/css/module/frame/layer_frame.css"}}},quote:{versions:{"1.0":{js:"quote{ver}.js?version=20140327"},latest:{js:"quote.js?version=20140327"}}}};u.register("core.func.getType",function($){return function(a){var b;return((b=typeof(a))=="object"?a==null&&"null"||Object.prototype.toString.call(a).slice(8,-1):b).toLowerCase()}});u.register("core.dom.ready",function($){var b=[];var c=false;var d=$.core.func.getType;var f=$.core.util.browser;var g=$.core.evt.addEvent;var h=function(){if(!c){if(document.readyState==="complete"){return true}}return c};var j=function(){if(c==true){return}c=true;for(var i=0,len=b.length;i<len;i++){if(d(b[i])==="function"){try{b[i].call()}catch(exp){}}}b=[]};var k=function(){if(h()){j();return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,25);return}j()};var l=function(){if(h()){j();return}setTimeout(arguments.callee,25)};var m=function(){g(document,"DOMContentLoaded",j)};var n=function(){g(window,"load",j)};if(!h()){if($.IE&&window===window.top){k()}m();l();n()}return function(a){if(h()){if(d(a)==="function"){a.call()}}else{b.push(a)}}});u.register("conf.api.wbml",function($){window.WB2=window.WB2||{};var q=function(a,b){var c;c=parent.document.createElement("script");c.charset="UTF-8";var d=/msie/i.test(navigator.userAgent);if(d){c.onreadystatechange=function(){if(c.readyState.toLowerCase()=="complete"||c.readyState.toLowerCase()=="loaded"){b();c.onreadystatechange=null}}}else{c.onload=function(){b();c.onload=null}}c.src=a;parent.document.getElementsByTagName("head")[0].appendChild(c);return c};var r={widgetCache:{},loadCss:function(a){css=document.createElement("link");css.href=a;css.type="text/css";css.rel="stylesheet";document.getElementsByTagName("head")[0].appendChild(css);r.widgetCache[a]=1},getWidgetFile:function(a,b){var c=window.WB2._config.host+"/open/api";var d=window.WB2._config.cssHost;var e=WB2.Module;var f=e[a];if(!f){throw("Module "+a+" can not be found!")}f=e[a]["versions"][b];if(!f){f=e[a]["versions"]["latest"]}var g=f.js.replace("{ver}",b);var h=(f.css!=null?f.css:e[a]["versions"]["latest"]["css"])||"";var i=c+"/js/widget/"+a+"/"+g;var j=h!=""?(/^http:\/\/|https:\/\/|\/\//.test(h)?h:d+h):"";return{js:i,css:j}},loadWidget:function(a,b){var c=a.module,version=a.version,loadcss=a.loadcss;var d=this.getWidgetFile(c,version);var e=function(){b&&b(d);I.next()};r._init(d.js,e);if(!loadcss){return}if(d.css&&!this.widgetCache[d.css]){this.loadCss(d.css)}},_init:function(a,b){if(r.widgetCache[a]){b&&b()}else{q(a,function(){r.widgetCache[a]=1;b&&b()})}}};var s=(function(){var g={load:function(b,c){var d=b.module||"",_version,loadCss=true;if(d==""){throw"no availiable module found."}if(typeof c==="string"){_version=c||"latest"}else{if(typeof c==="object"){_version=c.version||"latest";loadCss=c.loadcss}}var f={module:d,version:_version,loadcss:loadCss};if(d=="connectButton"){d="loginButton"}r.loadWidget(f,function(a){try{WB2.widget[d].call(window,b.params)}catch(e){u.common.log.monitor({from:"jssdk",url:a.js,param:b.params,title:d,error:e.toString()});throw e.toString()}});return this}};var h=WB2.Module;for(var i in h){if(i&&h[i]){if(i=="loginButton"){g.connectButton=(function(k){return function(a,b){g.load({module:k,params:a},b)}})(i)}g[i]=(function(k){return function(a,b){g.load({module:k,params:a},b)}})(i)}}return g})();return function(){var l=$.core.util.browser;var m=[{tagName:"login-button",widgetName:"loginButton"},{tagName:"publish",widgetName:"publish"},{tagName:"share-recommend",widgetName:"shareRecommend"},{tagName:"like",widgetName:"like"},{tagName:"follow-button",widgetName:"iframeWidget"},{tagName:"share-button",widgetName:"iframeWidget"},{tagName:"list",widgetName:"iframeWidget"},{tagName:"show",widgetName:"iframeWidget"},{tagName:"topic",widgetName:"iframeWidget"},{tagName:"comments",widgetName:"iframeWidget"},{tagName:"livestream",widgetName:"iframeWidget"},{tagName:"bulkfollow",widgetName:"iframeWidget"},{tagName:"hotlist",widgetName:"iframeWidget"},{tagName:"invite",widgetName:"invite"},{tagName:"quote",widgetName:"quote"}];var n=function(a,b){b=b||"wb";var c=navigator.userAgent.toLowerCase();var d=b+":"+a;if(l.IE){try{var f=document.namespaces;if(f&&f[b]){return document.getElementsByTagName(a).length==0?document.getElementsByTagName(d):document.getElementsByTagName(a)}}catch(e){}return document.getElementsByTagName(d)}else{if(l.MOZ){return document.getElementsByTagNameNS(document.body.namespaceURI,d)}else{return document.getElementsByTagName(d)}}};var o=function(a,b){var c=a.attributes;var d={};for(var i=c.length-1;i>=0;i--){var e=c[i];if(e.specified){d[c[i].name]=c[i].value}}d.dom=a;d.tagName=b;return d};var p=function(){var c=[];for(var i=0,h=m.length;i<h;i++){var d=m[i];var e=d.tagName;var f=d.widgetName;var g=n(e);for(var j=0,wlen=g.length;j<wlen;j++){g[j].innerHTML='<span style="background:url('+(window.location.protocol=="https:"?"https:":"http:")+'//timg.sjs.sinajs.cn/t4/appstyle/widget/images/library/base/loading1.gif) no-repeat;height:18px;padding:0 0 2px 20px;">Loading...</span>';c.push({tag:e,widget:f,params:o(g[j],e)})}}var h=c.length;if(h>0){if(/weibo|ucbrowser/i.test(navigator.userAgent)){for(var i=0,h=c.length;i<h;i++){var k=c[i];(function(a){setTimeout(function(){s[a.widget](a.params)},i*50)})(k)}}else{WB2.anyWhere(function(W){for(var i=0,h=c.length;i<h;i++){var b=c[i];(function(a){setTimeout(function(){W.widget[a.widget](a.params)},i*50)})(b)}})}}};(function(){try{if(document.namespaces&&!document.namespaces.item.wb){document.namespaces.add("wb")}}catch(e){}}());WB2.initCustomTag=p;$.core.dom.ready(function(){p()})}});u.register("core.json.jsonToStr",function($){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()}}var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(b){escapable.lastIndex=0;return escapable.test(b)?'"'+b.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function str(a,b){var i,k,v,length,mind=gap,partial,value=b[a];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(a)}if(typeof rep==="function"){value=rep.call(b,a,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}return function(a,b,c){var i;gap="";indent="";if(typeof c==="number"){for(i=0;i<c;i+=1){indent+=" "}}else{if(typeof c==="string"){indent=c}}rep=b;if(b&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":a})}});u.register("common.util.date",function(){var d=function(a,b){var o={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours()%12==0?12:a.getHours()%12,"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};var c={"0":"/u65e5","1":"/u4e00","2":"/u4e8c","3":"/u4e09","4":"/u56db","5":"/u4e94","6":"/u516d"};if(/(y+)/.test(b)){b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))}if(/(E+)/.test(b)){b=b.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"/u661f/u671f":"/u5468"):"")+c[a.getDay()+""])}for(var k in o){if(new RegExp("("+k+")").test(b)){b=b.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)))}}return b};return function(a,b){a=a||new Date();b=b||"yyyy-MM-dd hh:mm:ss";return d(a,b)}});u.register("conf.api.log",function($){var l=typeof window.console=="object"&&(typeof window.console.log=="function"||typeof window.console.log=="object");var m="weibo_jssdk_console_panel";var n=30,maxHeight=90;var o={info:"#0088CC",warn:"#D2D128",error:"#F50A0A"};var p={init:function(){var b="position:fixed;";if($.core.util.browser.IE6){b="position:absolute;"}var c=$.C("h5");c.innerHTML='Sina Weibo JSSDK Console Panel<a href="http://jssdk.sinaapp.com/help.php" target="_blank" style="position:absolute;right:0;margin-right:5px;color:#0088CC;font-size:12px;font-weight:normal;">Help?</a>';c.style.cssText="margin: 8px;font-size:13px;border-bottom:1px solid #ccc;";var d=$.C("div");d.id=m+"_logdiv";d.style.cssText="background:#000; color:#FFF; margin:5px; border:1px solid #ccc; height:150px; max-height:150px; overflow-x:hidden; overflow-y: auto; word-break:nowrap; padding:5px 5px;border-radius:5px;";var e=$.C("textarea");e.value='WB2.console.log("test");';e.style.cssText="line-height:20px;font-size:12px;width:380px;height:30px;overflow-y:auto;margin:3px;padding:5px; border-radius:5px;border:1px solid #ccc;";e.onfocus=function(){e.select()};e.ondblclick=function(){if(parseInt(e.style.height)<maxHeight){e.style.height=maxHeight+"px"}else{e.style.height=n+"px"}};var f=$.C("input");f.type="button";f.value="Clear";f.style.cssText="width:60px;height: 30px;border:1px solid #ccc; padding:2px 15px;border-radius:5px 0 0 5px;";f.onclick=function(){d.innerHTML=""};var g=$.C("input");g.type="button";g.value="Run";g.style.cssText="width:60px;height: 30px;border:1px solid #ccc; border-right:0;border-left:0; padding:2px 15px;";g.onclick=function(){var a=e.value;if(a){eval(a)}};var h=$.C("input");h.type="button";h.value="Close";h.style.cssText="width:60px;height: 30px;border:1px solid #ccc; padding:2px 15px;border-radius:0 5px 5px 0;";h.onclick=function(){p.hide()};var i=$.C("p");i.appendChild(f);i.appendChild(g);i.appendChild(h);i.style.cssText="margin:5px 3px;";var j=document.createElement("div");j.id=m;j.style.cssText=b+"z-index:9999;left:0;top:0;width:400px;background:#eee;padding:5px;border-radius:5px;border:1px solid #bbb;";j.appendChild(c);j.appendChild(d);j.appendChild(e);j.appendChild(i);p.output=d;p.close=h;p.panel=j;document.body.appendChild(j)},show:function(){if(!$.E(m)){p.init()}p.output=p.output||$.E(m+"_logdiv");p.panel&&(p.panel.style.display="block")},hide:function(){p.panel&&(p.panel.style.display="none")},setLog:function(a,b){if(typeof a=="string"){var c=new Date(),now=$.common.util.date(new Date()),styles="";switch(b){case"info":styles=o.info;break;case"warn":styles=o.warn;break;case"error":styles=o.error;break}styles="color:"+styles;var d='<p style="line-height:18px;margin:0;padding:0;"><span style="font-size:12px;color:#2EBC2C;">'+now+'</span><span style="font-size:12px;font-family: Verdana;padding-left:5px;'+styles+'">'+a;if(p.output.innerHTML!=""){d=d+"\r\n"+p.output.innerHTML}p.output.innerHTML=d+"</span></p>";p.output.scrollTop=0}},log:function(a,b){p.show();var c="";if(typeof a=="object"||Object.prototype.toString.call(a)==="[object Array]"){if(typeof a.parent==="object"){c=a.toString()}else{c=$.core.json.jsonToStr(a,null,"\t")}}else{if(typeof a=="undefined"){c="undefined"}else{c=a.toString()}}p.setLog(c,b)}};var q=["log","info","warn","error","dir"];return function(){window.WB2=window.WB2||{};window.WB2.console=window.WB2.console||{};window.WB2.console.init=function(){WB2._config.debug=true;l=false};function K(){for(var i=0,len=q.length;i<len;i++){var c=q[i];WB2.console[c]=(function(b){return function(a){if(WB2._config.debug){if(l){window.console[b](a)}else{try{p.log(a,b)}catch(e){p.log(e.message,b)}}}}})(c)}}K();var d={"USE_X-UA-Compatible":function(){if(!$.core.util.browser.IE11){return}var a=false,cMeta;var b=document.getElementsByTagName("meta");if(b&&b.length>0){for(var i=0,len=b.length;i<len;i++){if(b[i].getAttribute("http-equiv")=="X-UA-Compatible"){cMeta=b[i];if(b[i].getAttribute("content").indexOf("IE7")!=-1){a=true}break}}}var c={output:true,reason:"Use X-UA-Compatible Model In Current Page. "};return c}};$.core.dom.ready(function(){for(var k in d){var a=d[k]();if(a&&a.output){WB2.console.warn(a.reason)}}})}});var w;var x=true;var y=[];var z=2;var A="https://api.weibo.com/"+z+"/oauth2/query";var B;var C="https://api.weibo.com/"+z+"/oauth2/authorize";var D={};var $=u;var E=$.core.obj.parseParam,addEvent=$.core.evt.addEvent,trim=$.core.str.trim,browser=$.core.util.browser,CookieUtil=$.core.util.cookie,queryToJson=$.core.json.queryToJson;var F=function(b){var c={url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,responseName:null,varkey:"callback"};var d=-1;c=E(c,b);var e=c.responseName||("STK_"+Math.floor(Math.random()*1000)+new Date().getTime().toString());c.args[c.varkey]=e;var f=c.onComplete;var g=c.onTimeout;window[e]=function(a){if(d!=2&&f!=null){d=1;f(a)}};c.onComplete=null;c.onTimeout=function(){if(d!=1&&g!=null){d=2;g()}};return G(c)};var G=function(c){var d,requestTimeout;var e={url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,uniqueID:null};e=E(e,c);if(e.url==""){throw"url is null"}d=document.createElement("script");d.charset="UTF-8";var f=/msie/i.test(navigator.userAgent);if(e.onComplete!=null){if(f){d.onreadystatechange=function(){if(d.readyState.toLowerCase()=="complete"||d.readyState.toLowerCase()=="loaded"){clearTimeout(requestTimeout);e.onComplete();d.onreadystatechange=null}}}else{d.onload=function(){clearTimeout(requestTimeout);e.onComplete();d.onload=null}}}var g=function(a){if(a){var b=[];for(var p in a){b.push(p+"="+encodeURIComponent(trim(a[p])))}if(b.length){return b.join("&")}else{return""}}};var h=g(e.args);if(e.url.indexOf("?")==-1){if(h!=""){h="?"+h}}else{if(h!=""){h="&"+h}}d.src=e.url+h;document.getElementsByTagName("head")[0].appendChild(d);if(e.timeout>0&&e.onTimeout!=null){requestTimeout=setTimeout(function(){e.onTimeout()},e.timeout)}return d};var H=function(){this.started=1;this.taskList=[];this.setStatue=function(a){this.started=a};this.start=function(){this.setStatue(0);var i,b,args,pointer;var a=this.taskList.shift();var b=a[0],args=a[1],pointer=a[2];b.apply(pointer,args)};this.next=function(){this.setStatue(1);if(this.taskList.length>0){this.start()}};this.add=function(a,b){var c={args:[],pointer:window,top:false};c=E(c,b);if(c.top){this.taskList.unshift([a,c.args,c.pointer])}else{this.taskList.push([a,c.args,c.pointer])}if(this.started){this.start()}}};var I=new H();function initCommunicate(a){var b=WB2._config.version,instances=WB2.anyWhere._instances,blankIframe=instances[b];if(blankIframe){if(blankIframe.contentWindow._ready){blankIframe.contentWindow.request(a)}else{WB2.addToCallbacks(blankIframe.contentWindow,a)}}else{WB2.delayCall(a)}}function anyWhere(a){var b={requestType:"anywhere",callback:a};regIframeRequest(b)}function regIframeRequest(b){var c=b||{};var d=function(){initCommunicate(c);I.next()};var e=function(a){if(D.bundle){a&&a()}else{G({url:WB2._config.host+"/open/api/js/api/bundle.js?version="+WB2._config.cdn_version,onComplete:function(){D.bundle=1;a&&a()}})}};I.add(e,{args:[d]})}function clientInfo(){var a=document.getElementsByTagName("script");var b=a.length,index=0,weiboJs,url,appkey,secret,version;if(b>0){weiboJs=a[index++];while(weiboJs){if(weiboJs.src.indexOf("api/js/wb.js")!=-1){url=weiboJs.src.split("?").pop();break}weiboJs=a[index++]}}var c=queryToJson(url);appkey=c.appkey||"";secret=c.secret||"";debug=c.debug||false;version=c.version||1;return{appkey:appkey,secret:secret,debug:debug,version:version}}function loginReady(a,b){var i,len;if(a!=null){if(b==true){y.unshift(a)}else{y.push(a)}}if(WB2.checkLogin()){for(i=0,len=y.length;i<len;i++){y[i].call()}y=[]}}function showLogin(a){var b=$.core.util.URL(C),iWidth=600,iHeight=455;b.setParam("client_id",a.appkey);b.setParam("response_type","token");b.setParam("display","js");b.setParam("transport","html5");b.setParam("referer",encodeURI(document.location.href));B=window.open(b,"oauth_login_window","width="+iWidth+",height="+iHeight+",toolbar=no,menubar=no,resizable=no,status=no,left="+(screen.width-iWidth)/2+",top="+(screen.height-iHeight)/2);if(B){B.focus()}return}function messageHandler(a){if((/\api.weibo\.com$/).test(a.origin)){var b=a.data;b=unescape(b);b=queryToJson(b);if(b.error_code){b.success=-1;b.status=-1}else{b.success=1;b.status=1}loginCallBack(b)}}function loginCallBack(a){WB2.console.log(a);loginStatus(a.status);if(a.success==1){J.save(a);loginReady()}else{y.pop()}}function login(a){if(!x){return}loginReady(a,true);if(!WB2.checkLogin()){if(window.postMessage&&!browser.IE){showLogin({appkey:WB2._config.appkey})}else{regIframeRequest({appkey:WB2._config.appkey,requestType:"login",callback:loginCallBack})}}}function logout(a){if(!WB2.checkLogin()){return}if(WB2._config.appkey!=null){J.del();loginStatus(-1);WB2._config.access_token=null;delete WB2._config.access_token;try{F({url:"https://api.weibo.com/2/account/end_session.json?source="+WB2._config.appkey,onComplete:function(o){a&&a(o.data)}})}catch(e){throw"JavaScript SDK: logout error"}}}function loginStatus(a){if(a==null){return}w=a}function checkLogin(){return w==1}var J={load:function(){if(!$.core.obj.isEmpty(WB2.oauthData)){return WB2.oauthData}else{var a=CookieUtil.get("weibojs_"+WB2._config.appkey);a=unescape(a);var b=queryToJson(a);return b}},save:function(a){WB2.oauthData=a;var b="access_token="+(a.access_token||"")+"&refresh_token="+(a.refresh_token||"")+"&expires_in="+(a.expires_in||0)+"&uid="+(a.uid||"")+"&status="+(a.status||w||-1);CookieUtil.set("weibojs_"+WB2._config.appkey,b,{path:"/",domain:document.domain})},del:function(){WB2.oauthData={};CookieUtil.remove("weibojs_"+WB2._config.appkey,{path:"/",domain:document.domain})}};function getLoginStatus(b){var c=b||J.load();var d=c.access_token||"";var e=c.expires_in||"";if(d!=""){w=1}F({url:A,onComplete:function(a){WB2.console.log(a);a=a||{};if(a.status==1&&a.access_token){J.save(a);WB2._config.access_token=a.access_token;WB2._config.uid=a.uid}if(a.error){x=false;WB2.console.warn(a.error);if(a.error=="xd2.jsp has not Referer!"){WB2.console.warn("您使用的appkey未和域名进行绑定，请绑定后使用。")}return}w=a.status;loginReady()},args:{source:WB2._config.appkey}})}var K=function(a){if(a.access_token){w=1;x=true;var b={status:w,access_token:a.access_token};if(a.uid){b.uid=a.uid}J.save(b)}};window.WB2=window.WB2||{};WB2.widget={};var L=clientInfo();WB2._config=WB2._config||{};WB2._config.version=L.version;WB2._config.appkey=L.appkey;WB2._config.secret=L.secret;WB2._config.debug=L.debug;WB2.oauthData={};WB2.init=K;WB2.login=login;WB2.logout=logout;WB2.checkLogin=checkLogin;WB2.anyWhere=anyWhere;WB2.anyWhere._instances={};WB2.Cookie=J;WB2.regIframeRequest=regIframeRequest;$.conf.api.log();$.conf.api.wbml();WB2._config.appkey&&getLoginStatus();if(window.postMessage&&!browser.IE){$.core.evt.addEvent(window,"message",messageHandler)}})();